import{W as T,r as l,D as E}from"./index-HTM9DAes.js";const F=T("todosStore",()=>{const t=l([]),c=l(!1),s=l(null),a=l("all"),i=l(""),m=l(""),r="ycnaz-todos",d=async()=>{c.value=!0;try{await new Promise(o=>setTimeout(o,2e3));const e=JSON.parse(localStorage.getItem(r))||[];t.value=e,s.value=null}catch(e){s.value=e.message||"Failed to fetch to-do's"}finally{c.value=!1}};d();const p=e=>{i.value="",a.value=e},v=e=>{i.value=e},S={all:()=>t.value,today:()=>g("today"),upcoming:()=>g("upcoming"),completed:()=>L(),expired:()=>g("expired")},u=()=>{localStorage.setItem(r,JSON.stringify(t.value))},y=e=>{t.value.push(e),u()},h=e=>{t.value=t.value.filter(o=>o.id!==e),u()},D=e=>{const o=t.value.find(n=>n.id===e);o&&(o.completed=!o.completed,u())},O=(e,o)=>{const n=t.value.findIndex(f=>f.id===e);n!==-1&&(t.value[n]={...t.value[n],...o},u())},w=e=>{t.value=t.value.filter(o=>o.list!==e.name),u()},L=()=>t.value.filter(e=>e.completed),x=e=>t.value.filter(o=>o.list===e),I=E(()=>{let e=S[a.value]?S[a.value]():[];return i.value&&(e=t.value.filter(o=>o.list===i.value)),m.value&&(e=t.value.filter(o=>o.text.toLowerCase().includes(m.value.toLowerCase()))),e}),g=e=>{const o=new Date().setHours(0,0,0,0);return t.value.filter(n=>{const f=new Date(n.date).setHours(0,0,0,0);return e==="today"?f===o:e==="upcoming"?f>o:f<o})};return{todos:t,filteredTodos:I,loading:c,filter:a,error:s,fetchTodos:d,query:m,filters:S,listFilter:i,saveTodosToLocalStorage:u,updateTodo:O,changeFilter:p,changeListFilter:v,removeTodoWhenListDeleted:w,addTodo:y,removeTodo:h,toggleTodo:D,completedTodos:L,todosInList:x,todosBasedOnDate:g}}),N=T("listStore",()=>{const t="ycnaz-lists",c=l([{id:1,name:"Personal",color:"#eab308"},{id:2,name:"Work",color:"#ef4444"}]),s=l(JSON.parse(localStorage.getItem(t))||c),a=()=>{localStorage.setItem(t,JSON.stringify(s.value))};return{lists:s,addList:r=>{s.value.push(r),a()},removeList:r=>{const d=s.value.find(v=>v.id===r);s.value=s.value.filter(v=>v.id!==r),a();const p=F();d&&p.removeTodoWhenListDeleted(d)}}});export{N as a,F as u};
